<?xml version="1.0" encoding="utf-8" ?>
<toolkit:Popup xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
               xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
               xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
               x:Class="NavascaBasTaskerApp.MVVM.Views.CategoryPopup"
               Color="Transparent"
               >

    <Border StrokeThickness="0" 
            BackgroundColor="White" 
            WidthRequest="320" 
            HeightRequest="400">
        <Border.StrokeShape>
            <RoundRectangle CornerRadius="25"/>
        </Border.StrokeShape>
        <Border.Shadow>
            <Shadow Brush="Black" Offset="0,10" Radius="20" Opacity="0.3"/>
        </Border.Shadow>

        <VerticalStackLayout Padding="25" Spacing="20" VerticalOptions="Center">

            <Label Text="New Category" 
                   FontSize="24" 
                   FontFamily="OutfitBold"
                   TextColor="#5E66FF" 
                   HorizontalOptions="Center"/>

            <VerticalStackLayout Spacing="8">
                <Label Text="Name" FontSize="16" TextColor="Gray" FontFamily="OutfitRegular" Margin="5,0"/>

                <Entry x:Name="CategoryEntry" 
                       PlaceholderColor="Silver"
                       TextColor="Black"
                       BackgroundColor="#f3f0ff"
                       FontFamily="OutfitRegular"
                       MaxLength="21" />
                <Label x:Name="ErrorLabel"
                       Text="Category name cannot exceed 20 characters."
                       TextColor="Red"
                       FontSize="12"
                       FontFamily="OutfitRegular"
                       Margin="5,-5,0,0"
                       IsVisible="False" />

            </VerticalStackLayout>

            <VerticalStackLayout Spacing="10">
                <Label Text="Choose Theme Color" FontSize="16" FontFamily="OutfitRegular" TextColor="Gray" Margin="5,0"/>

                <CollectionView x:Name="ColorCollectionView" 
                SelectionMode="Single"
                HeightRequest="70" 
                HorizontalScrollBarVisibility="Never"> <CollectionView.ItemsLayout>
        <LinearItemsLayout Orientation="Horizontal" ItemSpacing="15" />
    </CollectionView.ItemsLayout>
    <CollectionView.ItemTemplate>
        <DataTemplate x:DataType="x:String"> <Grid WidthRequest="50" HeightRequest="50">
                <Border StrokeThickness="3" Stroke="Transparent">
                    <BoxView Color="{Binding .}" 
                             CornerRadius="20"
                             WidthRequest="40"
                             HeightRequest="40"
                             HorizontalOptions="Center"
                             VerticalOptions="Center"/>
                </Border>
            </Grid>
        </DataTemplate>
    </CollectionView.ItemTemplate>
</CollectionView>
            </VerticalStackLayout>

            <Button Text="CREATE"
                    FontFamily="OutfitBold"
                    Clicked="OnAdd_Clicked" 
                    BackgroundColor="#5E66FF" 
                    TextColor="White" 
                    CornerRadius="15"
                    FontSize="16"
                    HeightRequest="50"
                    Margin="0,10,0,0"/>

        </VerticalStackLayout>
    </Border>

</toolkit:Popup>