<?xml version="1.0" encoding="utf-8" ?>
<toolkit:Popup xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
               xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
               xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
               x:Class="NavascaBasTaskerApp.MVVM.Views.CategoryPopup"
               Color="Transparent"
               >

    <Border StrokeThickness="0" 
            BackgroundColor="White" 
            WidthRequest="320" 
            HeightRequest="400">
        <Border.StrokeShape>
            <RoundRectangle CornerRadius="25"/>
        </Border.StrokeShape>
        <Border.Shadow>
            <Shadow Brush="Black" Offset="0,10" Radius="20" Opacity="0.3"/>
        </Border.Shadow>

        <VerticalStackLayout Padding="25" Spacing="20" VerticalOptions="Center">

            <Label Text="New Category" 
                   Style="{StaticResource HeaderLabelStyle}" />

            <VerticalStackLayout Spacing="8">
                <Label Text="Name" 
                       Style="{StaticResource FieldHatdogLabelStyle}" />

                <Entry x:Name="CategoryEntry" 
                       Style="{StaticResource CategoryEntryStyle}" />

                <Label x:Name="ErrorLabel" 
                       Text="Category name cannot exceed 20 characters."
                       Style="{StaticResource ErrorLabelStyle}"
                       IsVisible="False" />

            </VerticalStackLayout>

            <VerticalStackLayout Spacing="10">
                <Label Text="Choose Theme Color" 
                       Style="{StaticResource FieldHatdogLabelStyle}" />

                <CollectionView x:Name="ColorCollectionView" 
                SelectionMode="Single"
                HeightRequest="70" 
                HorizontalScrollBarVisibility="Never"> <CollectionView.ItemsLayout>
        <LinearItemsLayout Orientation="Horizontal" ItemSpacing="15" />
    </CollectionView.ItemsLayout>
    <CollectionView.ItemTemplate>
        <DataTemplate x:DataType="x:String"> <Grid WidthRequest="50" HeightRequest="50">
                <Border StrokeThickness="3" Stroke="Transparent">
                    <BoxView Color="{Binding .}" 
                             CornerRadius="20"
                             WidthRequest="40"
                             HeightRequest="40"
                             HorizontalOptions="Center"
                             VerticalOptions="Center"/>
                </Border>
            </Grid>
        </DataTemplate>
    </CollectionView.ItemTemplate>
</CollectionView>
            </VerticalStackLayout>

            <Button Style="{StaticResource CreateButtonStyle}"
                    Clicked="OnAdd_Clicked" />

        </VerticalStackLayout>
    </Border>

</toolkit:Popup>